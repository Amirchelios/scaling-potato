//profile-title: IRANCELL
//profile-update-interval: 1
{
  "log": {
    "disabled": true,
    "level": "warn",
    "timestamp": false
  },
  "dns": {
    "servers": [
      {
        "address": "tcp://8.8.8.8",
        "address_resolver": "dns-direct",
        "strategy": "ipv4_only",
        "tag": "dns-remote"
    },
    {
        "address": "8.8.8.8",
        "address_resolver": "dns-local",
        "detour": "proxy",
        "strategy": "ipv4_only",
        "tag": "dns-direct"
    },
      {
          "address": "local",
          "detour": "direct",
          "tag": "dns-local"
      },
      {
          "address": "rcode:\/\/success",
          "tag": "dns-block"
      }
    ],
      "rules": [
          {
              "domain_suffix": [
                  ".ir"
              ],
              "server": "dns-direct"
          },
          {
              "outbound": "direct",
              "server": "dns-direct",
              "rewrite_ttl": 20
          },
          {
              "outbound": "any",
              "server": "dns-direct",
              "rewrite_ttl": 20
          }
      ],
      "reverse_mapping": true,
      "strategy": "ipv4_only",
      "independent_cache": true
  },
  "inbounds": [
    {
      "sniff": true,
      "type": "mixed",
      "listen": "127.0.0.1",
      "listen_port": 1081
    },
    {
      "stack": "mixed",
      "auto_route": true,
      "inet4_address": "172.19.0.1/30",
      "mtu": 9000,
      "sniff": true,
      "strict_route": true,
      "type": "tun",
      "platform": {
        "http_proxy": {
          "enabled": false,
          "server": "127.0.0.1",
          "server_port": 1081
        }
      }
    }
  ],
  "outbounds": [
      {
          "tag": "proxy",
          "type": "selector",
          "outbounds": [
              "URL-TEST",
              "@v2rayNG_Matsuri|🇺🇸|2.05",
              "🔒 VL-GRPC-TLS 🏴‍☠️ NA-104.16.54.99:2053 📡 PING-016.39-MS",
              "🇵🇱PL-51.77.53.200-9408",
              "Poland 29"
            ]
      },
      {
          "tag": "URL-TEST",
          "type": "urltest",
          "outbounds": [
            "@v2rayNG_Matsuri|🇺🇸|2.05",
            "🔒 VL-GRPC-TLS 🏴‍☠️ NA-104.16.54.99:2053 📡 PING-016.39-MS",
            "🇵🇱PL-51.77.53.200-9408",
            "Poland 29"    
          ],
          "url": "https://www.google.com/",
          "interval": "3m",
          "tolerance": 30
      },
      {
          "tag": "direct",
          "type": "direct"
      },
      {
          "tag": "bypass",
          "type": "direct"
      },
      {
          "tag": "block",
          "type": "block"
      },
      {
          "tag": "dns-out",
          "type": "dns"
      },
      {
        "server": "104.31.16.36",
        "server_port": 443,
        "tls": {
          "enabled": true,
          "server_name": "lmn39.sbs"
        },
        "transport": {
          "path": "/fflsws",
          "type": "ws",
          "max_early_data": 4096,
          "early_data_header_name": "Sec-WebSocket-Protocol"
        },
        "uuid": "376b9861-2fc6-4647-959c-18185cd9c95a",
        "tag": "@v2rayNG_Matsuri|🇺🇸|2.05",
        "type": "vless"
      },
      {
        "server": "104.16.54.99",
        "server_port": 2053,
        "tls": {
          "enabled": true,
          "server_name": "fff.vipconnected.cfd",
          "utls": {
            "enabled": true,
            "fingerprint": "firefox"
          }
        },
        "transport": {
          "type": "grpc",
          "service_name": "Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER-Telegram:@NUFiLTER"
        },
        "uuid": "a760297b-0cc1-46c6-fd92-590cc7d9e5d0",
        "tag": "🔒 VL-GRPC-TLS 🏴‍☠️ NA-104.16.54.99:2053 📡 PING-016.39-MS",
        "type": "vless"
      },
      {
        "server": "51.77.53.200",
        "server_port": 2376,
        "password": "faBAoD54k87UJG7",
        "method": "aes-256-gcm",
        "tag": "🇵🇱PL-51.77.53.200-9408",
        "type": "shadowsocks"
      },
      {
        "server": "51.77.53.200",
        "server_port": 8009,
        "password": "XKFKl2rULjIp74",
        "method": "aes-256-gcm",
        "tag": "Poland 29",
        "type": "shadowsocks"
      }  
  ],
  "route": {
      "auto_detect_interface": true,
      "override_android_vpn": true,
      "final": "proxy",
      "geoip": {
          "download_url": "https:\/\/github.com\/MiSaturo\/sing-box-geoip-ir\/releases\/latest\/download\/geoip.db",
          "download_detour": "proxy"
      },
      "geosite": {
          "download_url": "https:\/\/github.com\/MasterKia\/iran-hosted-domains\/releases\/latest\/download\/iran-geosite.db",
          "download_detour": "proxy"
      },
      "rules": [
        {
          "protocol": "dns",
          "outbound": "dns-out"
        },
        {
          "geosite": [
            "youtube"
          ],
          "geoip":[
            "yourube"
          ],
          "outbound": "direct"
        },
        {
          "geosite": [
            "telegram"
          ],
          "geoip": [
            "telegram"
          ],
          "outbound": "direct"
        },
        {
          "geosite": [
            "facebook"
          ],
          "geoip": [
            "facebook"
          ],
          "outbound": "direct"
        }
      ]
    },
    "experimental": {
      "clash_api": {
        "external_controller": "127.0.0.1:9090",
        "external_ui": "ui",
        "store_selected": true
      }
    }
  }