//profile-title: IRANCELL
//profile-update-interval: 1
{
  "log": {
    "disabled": true,
    "level": "warn",
    "timestamp": false
  },
  "dns": {
    "servers": [
      {
        "address": "tcp://8.8.8.8",
        "address_resolver": "dns-direct",
        "strategy": "ipv4_only",
        "tag": "dns-remote"
    },
    {
        "address": "8.8.8.8",
        "address_resolver": "dns-local",
        "detour": "proxy",
        "strategy": "ipv4_only",
        "tag": "dns-direct"
    },
      {
          "address": "local",
          "detour": "direct-out",
          "tag": "dns-local"
      },
      {
          "address": "rcode:\/\/success",
          "tag": "dns-block"
      }
    ],
      "rules": [
          {
              "domain_suffix": [
                  ".ir"
              ],
              "server": "dns-direct"
          },
          {
              "outbound": "direct-out",
              "server": "dns-direct",
              "rewrite_ttl": 20
          },
          {
              "outbound": "any",
              "server": "dns-direct",
              "rewrite_ttl": 20
          }
      ],
      "reverse_mapping": true,
      "strategy": "ipv4_only",
      "independent_cache": true
  },
  "inbounds": [
    {
      "type": "direct",
      "tag": "direct-in",
      "network": "udp",
      "override_address": "1.0.0.1",
      "override_port": 53
    },
    {
      "sniff": true,
      "type": "mixed",
      "listen": "127.0.0.1",
      "listen_port": 1081
    },
    {
      "stack": "mixed",
      "auto_route": true,
      "inet4_address": "172.19.0.1/30",
      "mtu": 9000,
      "sniff": true,
      "strict_route": true,
      "type": "tun",
      "platform": {
        "http_proxy": {
          "enabled": false,
          "server": "127.0.0.1",
          "server_port": 1081
        }
      }
    }
  ],
  "outbounds": [
      {
          "tag": "proxy",
          "type": "selector",
          "outbounds": [
              "URL-TEST",
              "🔒 VL-GRPC-TLS 🏴‍☠️ NA-104.16.16.120:2096 📡 PING-017.69-MS | 1"
          ]
      },
      {
          "tag": "URL-TEST",
          "type": "urltest",
          "outbounds": [
              "🔒 VL-GRPC-TLS 🏴‍☠️ NA-104.16.16.120:2096 📡 PING-017.69-MS | 1"
          ],
          "url": "https://www.google.com/",
          "interval": "3m",
          "tolerance": 50
      },
      {
          "tag": "🔒 VL-GRPC-TLS 🏴‍☠️ NA-104.16.16.120:2096 📡 PING-017.69-MS | 1",
          "type": "vless",
          "server": "104.16.16.120",
          "server_port": 2096,
          "uuid": "45176f6e-f380-413e-b996-a7acfd754541",
          "flow": "",
          "packet_encoding": "xudp",
          "multiplex": {
              "enabled": false,
              "protocol": "smux",
              "max_streams": 32
          },
          "tls": {
              "enabled": true,
              "server_name": "free02.Iranbax.cfd",
              "insecure": false,
              "utls": {
                  "enabled": true,
                  "fingerprint": "chrome"
              }
          },
          "transport": {
              "type": "grpc",
              "service_name": "@iranbaxvpn=@iranbaxvpn=@iranbaxvpn=@iranbaxvpn=@iranbaxvpn=@iranbaxvpn",
              "idle_timeout": "15s",
              "ping_timeout": "15s",
              "permit_without_stream": false
          }
      },
      {
        "type": "direct",
        "tag": "direct-out",
      
        "override_address": "1.0.0.1",
        "override_port": 53,
        "proxy_protocol": 0
      },
      {
          "tag": "bypass",
          "type": "direct"
      },
      {
          "tag": "block",
          "type": "block"
      },
      {
          "tag": "dns-out",
          "type": "dns"
      }
  ],
  "route": {
    "rules": [
      {
        "ip_is_private": true,
        "outbound": "direct"
      },
      {
        "rule_set": "geoip-cn",
        "outbound": "direct"
      },
      {
        "rule_set": "geoip-us",
        "rule_set_ipcidr_match_source": true,
        "outbound": "block"
      }
    ],
    "rule_set": [
      {
        "tag": "geoip-cn",
        "type": "remote",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-cn.srs",
        "download_detour": "proxy"
      },
      {
        "tag": "geoip-us",
        "type": "remote",
        "format": "binary",
        "url": "https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-us.srs",
        "download_detour": "proxy"
      }
    ]
    },
        "experimental": {
      "cache_file":{
        "enabled": true
      },
      "clash_api": {
        "external_controller": "127.0.0.1:9090",
        "external_ui": "ui"
      }
    }
  }